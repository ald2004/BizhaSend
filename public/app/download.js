!function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);for(d&&d(e);p.length;)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={2:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/app/";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;s.push([174,0]),n()}({174:function(t,e,n){"use strict";n.r(e);n(55);var a=n(4),i=n.n(a),s=(n(77),n(80),n(56),n(26),n(34),n(54),n(92),n(98)),o=n.n(s),r=n(99),l=n.n(r),c=n(25),d=n.n(c),u=n(35),p=n(36),f={props:{hasHeader:{type:Boolean,default:!1},hasFooter:{type:Boolean,default:!1}},mounted:function(){this.$nextTick((function(){this.$refs.modal.focus()}))},methods:{close:function(){this.$emit("close")}}},m=n(1),v=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"modal",staticClass:"modal fade in background-darken",staticStyle:{display:"block"},attrs:{tabindex:"-1",role:"dialog"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.close()},keyup:[function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.close()},function(e){return!("button"in e)&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void t.$emit("prev")},function(e){return!("button"in e)&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:void t.$emit("next")}]}},[n("div",{staticClass:"modal-dialog modal-fluid",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[t.hasHeader?n("div",{staticClass:"modal-header"},[n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.close()}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]),n("h4",{staticClass:"modal-title"},[t._t("header",[t._v(" Modal")])],2)]):t._e(),n("div",{staticClass:"modal-body"},[t._t("body",[t._v(" Body")])],2),t.hasFooter?n("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()])])])}),[],!1,null,null,null);v.options.__file="Modal.vue";var h=v.exports,w=(n(163),n(164),n(165),{components:{Modal:h},props:["preview","files","maxSize"],data:function(){return{previewText:"",lineWrap:!1,current:!1}},computed:{currentIndex:function(){return this.files.indexOf(this.current)}},watch:{preview:function(t){this.current=t},current:function(t,e){!1===t&&this.$emit("close"),"text"===t.previewType&&t!==e&&this.getPreviewText()}},methods:{next:function(){this.currentIndex>=this.files.length-1||(this.current=this.files[this.currentIndex+1])},prev:function(){this.currentIndex<=0||(this.current=this.files[this.currentIndex-1])},getPreviewText:function(){var t=this;this.previewText="";var e=new XMLHttpRequest;e.open("GET","//"+document.location.host+this.current.url),e.onload=function(){200===e.status?t.previewText=e.responseText:t.previewText="".concat(e.status," ").concat(e.statusText,": ").concat(e.responseText)},e.send()}}}),b=Object(m.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.current?n("modal",{staticClass:"preview-modal",attrs:{"has-header":!0},on:{close:function(e){t.current=!1},next:t.next,prev:t.prev}},[n("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[n("p",[n("strong",[t._v(t._s(t.current.metadata.name))])]),n("div",[n("small",[t._v(t._s(t.currentIndex+1)+" / "+t._s(t.files.length))]),n("span",{staticClass:"btn-group"},[n("a",{directives:[{name:"show",rawName:"v-show",value:t.currentIndex>0,expression:"currentIndex > 0"}],staticClass:"btn btn-sm btn-default",attrs:{title:"previous"},on:{click:t.prev}},[n("icon",{attrs:{name:"arrow-left"}})],1),n("a",{directives:[{name:"show",rawName:"v-show",value:t.currentIndex<t.files.length-1,expression:"currentIndex < files.length-1"}],staticClass:"btn btn-sm btn-default",attrs:{title:"next"},on:{click:t.next}},[n("icon",{attrs:{name:"arrow-right"}})],1),n("a",{directives:[{name:"show",rawName:"v-show",value:"text"===t.current.previewType,expression:"current.previewType === 'text'"}],staticClass:"btn btn-sm btn-default",class:{active:t.lineWrap},attrs:{title:"toggle line wrap"},on:{click:function(e){t.lineWrap=!t.lineWrap}}},[n("icon",{attrs:{name:"undo-alt",flip:"vertical"}})],1)])])]),n("div",{attrs:{slot:"body"},slot:"body"},["image"===t.current.previewType?n("div",{staticStyle:{"text-align":"center"}},[n("img",{staticStyle:{"max-width":"100%",height:"auto"},attrs:{src:t.current.url}})]):t._e(),"text"===t.current.previewType?n("div",[n("pre",{style:{"white-space":t.lineWrap?"pre-wrap":"pre"}},[t._v(t._s(t.previewText))])]):t._e(),!1===t.current.previewType?n("p",{staticStyle:{"text-align":"center"}},[n("strong",{staticClass:"text-danger"},[t._v("No preview available")])]):t._e()])]):t._e()}),[],!1,null,null,null);b.options.__file="PreviewModal.vue";var y=b.exports;n(91),n(24),n(57),n(43),n(166),n(52),n(167);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){return!(!t||!t.metadata)&&("one-time"!==t.metadata.retention&&(!(t.size>e)&&(t.metadata.type&&t.metadata.type.match(/^image\/.*/)?"image":!!(t.metadata.type&&t.metadata.type.match(/(text\/|xml|json|javascript|x-sh)/)||t.metadata.name&&t.metadata.name.match(/\.(jsx|vue|sh|pug|less|scss|sass|c|h|conf|log|bat|cmd|lua|class|java|py|php|yml|sql|md)$/))&&"text")))}var _={name:"app",components:{FileIcon:u.a,Clipboard:p.a,PreviewModal:y},data:function(){return{files:[],sid:document.location.pathname.substr(1),passwordWrong:!1,needsPassword:!1,password:"",content:"",error:"",host:document.location.protocol+"//"+document.location.host,config:{},preview:!1}},computed:{downloadsAvailable:function(){return this.files.filter((function(t){return!t.downloaded||"one-time"!==t.metadata.retention})).length>0},previewFiles:function(){return this.files.filter((function(t){return!!t.previewType}))}},methods:{download:function(t){if(t.downloaded&&"one-time"===t.metadata.retention)alert("One-Time Download: File is not available anymore.");else{var e=document.createElement("a");e.setAttribute("href",t.url),e.setAttribute("download",t.metadata.name),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),t.downloaded=!0}},downloadAll:function(t){document.location.href=document.location.protocol+"//"+document.location.host+"/files/"+this.sid+"++"+d()(this.files.filter((function(t){return!t.downloaded||"one-time"!==t.metadata.retention})).map((function(t){return t.key})).join()).toString()+"."+t,this.files.forEach((function(t){t.downloaded=!0}))},copied:function(t,e){t.downloaded="copied"===e},decrypt:function(){var t=this;this.passwordWrong=!1,this.files=this.files.map((function(e){if("object"===g(e))return e;var n=o.a.decrypt(e,t.password);try{return n=JSON.parse(n.toString(l.a)),Object.assign(n,{downloaded:!1,previewType:x(n,t.config.maxPreviewSize)})}catch(n){return t.passwordWrong=!0,e}})),this.passwordWrong||(this.needsPassword=!1,this.password="")},humanFileSize:function(t){var e=-1;do{t/=1024,e++}while(t>1024);return Math.max(t,.01).toFixed(2)+[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"][e]},newSession:function(){document.location.href="/"},isFinite:function(t){return"number"==typeof t&&!(t!=t||t===1/0||t===-1/0)}},beforeMount:function(){var t=this,e=new XMLHttpRequest;e.open("GET","/"+this.sid+".json"),e.onload=function(){if(200===e.status)try{var n=JSON.parse(e.responseText);t.config=n.config,t.files=n.items.map((function(e){return"object"!==g(e)?(t.needsPassword=!0,e):Object.assign(e,{downloaded:!1,previewType:x(e,t.config.maxPreviewSize)})}))}catch(e){t.error=e.toString()}else t.error="".concat(e.status," ").concat(e.statusText,": ").concat(e.responseText)},e.send()}},C=Object(m.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"download-app"},[n("a",{staticClass:"btn btn-sm btn-info btn-new-session",attrs:{title:"New Upload"},on:{click:function(e){t.newSession()}}},[n("icon",{staticClass:"fa-fw",attrs:{name:"cloud-upload-alt"}}),n("span",{staticClass:"hidden-xs"},[t._v("上传新文件")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"alert alert-danger"},[n("strong",[n("icon",{staticClass:"fa-fw",attrs:{name:"exclamation-triangle"}}),t._v(" "+t._s(t.error))],1)]),t.needsPassword?n("div",{staticClass:"well"},[n("h3",[t._v("请输入密码：")]),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.passwordWrong,expression:"passwordWrong"}],staticClass:"text-danger"},[n("strong",[t._v("Access denied!")])]),n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.password.length<1},on:{click:function(e){t.decrypt()}}},[n("icon",{staticClass:"fa-fw",attrs:{name:"key"}}),t._v("确认")],1)]):t._e(),t.needsPassword?t._e():n("div",{staticClass:"panel panel-primary"},[n("div",{staticClass:"panel-heading"},[n("strong",[t._v("文件列表：")]),t.downloadsAvailable?n("div",{staticClass:"pull-right btn-group btn-download-archive"},[n("a",{staticClass:"btn btn-sm btn-default",attrs:{title:"打包为zip文件"},on:{click:function(e){t.downloadAll("zip")}}},[n("icon",{staticClass:"fa-fw",attrs:{name:"download"}}),t._v(" zip")],1),n("a",{staticClass:"btn btn-sm btn-default",attrs:{title:"打包为.tar.zip文件"},on:{click:function(e){t.downloadAll("tar.gz")}}},[n("icon",{staticClass:"fa-fw",attrs:{name:"download"}}),t._v(" tar.gz")],1)]):t._e()]),n("div",{staticClass:"panel-body"},[n("table",{staticClass:"table table-hover table-striped"},[n("tbody",t._l(t.files,(function(e){return n("tr",{staticStyle:{cursor:"pointer"},on:{click:function(n){t.download(e)}}},[n("td",{staticClass:"file-icon"},[n("file-icon",{attrs:{file:e}})],1),n("td",[n("div",{staticClass:"pull-right btn-group"},[n("clipboard",{staticClass:"btn btn-sm btn-default",attrs:{value:t.host+e.url,title:"复制到粘贴板"},on:{change:function(n){t.copied(e,n)}}},[n("a",[n("icon",{attrs:{name:"copy"}})],1)]),e.previewType?n("a",{staticClass:"btn btn-sm btn-default",attrs:{title:"Preview"},on:{click:function(n){n.preventDefault(),n.stopPropagation(),t.preview=e}}},[n("icon",{attrs:{name:"eye"}})],1):t._e()],1),n("i",{directives:[{name:"show",rawName:"v-show",value:e.downloaded,expression:"file.downloaded"}],staticClass:"pull-right fa fa-check text-success downloaded"}),n("p",[n("strong",[t._v(t._s(e.metadata.name))]),isFinite(e.size)?n("small",{staticClass:"file-size"},[t._v("("+t._s(t.humanFileSize(e.size))+")")]):t._e()]),n("p",[t._v(t._s(e.metadata.comment))])])])})),0)])])]),n("preview-modal",{attrs:{preview:t.preview,files:t.previewFiles,"max-size":t.config.maxPreviewSize},on:{close:function(e){t.preview=!1}}})],1)}),[],!1,null,null,null);C.options.__file="Download.vue";var k=C.exports,S=n(0);String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.indexOf(t,e)===e}),i.a.component("icon",S.a),new i.a({el:"#download",render:function(t){return t(k)}}),window.PSITRANSFER_VERSION="#041684408b"},35:function(t,e,n){"use strict";n(55),n(85),n(86),n(87),n(88),n(89),n(90);var a={props:["file"],computed:{iconClass:function(){var t=this.file.type||this.file.metadata&&this.file.metadata.type;return t?t.startsWith("image")?"regular/file-image":t.startsWith("text")?"regular/file-alt":t.startsWith("video")?"regular/file-video":t.startsWith("audio")?"regular/file-audio":"application/pdf"===t?"regular/file-pdf":t.startsWith("application")?"regular/file-archive":"regular/file":"regular/file"},isImageBlob:function(){return!(!URL&&!webkitURL)&&(this.file instanceof File&&this.file.type.startsWith("image"))},blobUrl:function(){if(this.isImageBlob)return(URL||webkitURL).createObjectURL(this.file)}}},i=n(1),s=Object(i.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"file-icon"},[this.isImageBlob?this._e():e("icon",{attrs:{name:this.iconClass,scale:"3"}}),this.isImageBlob?e("img",{attrs:{src:this.blobUrl}}):this._e()],1)}),[],!1,null,null,null);s.options.__file="FileIcon.vue";e.a=s.exports},36:function(t,e,n){"use strict";n(56),n(43),n(57),n(24);var a={name:"Clipboard",props:{value:{type:String,required:!0}},data:function(){return{state:"pristine"}},methods:{copy:function(){var t=document.createElement("textarea");Object.assign(t.style,{position:"absolute",left:"-200%"}),t.value=this.value,document.body.appendChild(t);var e=!1;try{t.select(),e=document.execCommand("copy")}catch(t){alert("Dein alter Browser unterstützt diese Funktion leider nicht."),console.error(t)}document.body.removeChild(t),this.state=e?"copied":"error",this.$emit("change",this.state)}}},i=n(1),s=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.copy()}}},[t._t("default",["pristine"===t.state?n("icon",{staticClass:"fa-fw",attrs:{name:"copy"}}):t._e(),"copied"===t.state?n("icon",{staticClass:"fa-fw",attrs:{name:"check"}}):t._e(),"error"===t.state?n("icon",{staticClass:"fa-fw",attrs:{name:"exclamation-triangle"}}):t._e(),t._t("text",[t._v(" Copy")])],{state:t.state})],2)}),[],!1,null,null,null);s.options.__file="Clipboard.vue";e.a=s.exports}});