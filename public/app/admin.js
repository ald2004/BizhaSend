!function(t){function e(e){for(var n,o,i=e[0],d=e[1],l=e[2],c=0,p=[];c<i.length;c++)o=i[c],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(t[n]=d[n]);for(u&&u(e);p.length;)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var d=a[i];0!==r[d]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={1:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/app/";var i=window.webpackJsonp=window.webpackJsonp||[],d=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=d;s.push([175,0]),a()}({171:function(t,e,a){"use strict";var n=a(46);a.n(n).a},172:function(t,e,a){(t.exports=a(83)(!1)).push([t.i,"\n.bucket {\n  cursor: pointer;\n}\n.expanded {\n  background: #fafafa;\n}\n.expanded .bucket td {\n  font-weight: bold;\n}\ntfoot {\n  font-weight: bold;\n}\n",""])},175:function(t,e,a){"use strict";a.r(e);a(34);var n=a(4),r=a.n(n),s=(a(82),a(168),a(37),a(66),a(26),a(24),a(169),a(170),a(52),{name:"app",data:function(){return{db:{},sum:{},loggedIn:!1,password:"",error:"",passwordWrong:!1,expand:!1,sizeSum:0}},methods:{expandView:function(t){if(this.expand===t)return this.expand=!1;this.expand=t},login:function(){var t=this;if(this.password){var e=new XMLHttpRequest;e.open("GET","/admin/data.json"),e.setRequestHeader("x-passwd",this.password),e.onload=function(){if(200===e.status)try{t.db=JSON.parse(e.responseText),t.loggedIn=!0,t.error="",t.passwordWrong=!1,t.expandDb()}catch(e){t.error=e.toString()}else 403===e.status?t.passwordWrong=!0:t.error="".concat(e.status," ").concat(e.statusText,": ").concat(e.responseText)},e.send()}},expandDb:function(){var t=this;this.sizeSum=0,Object.keys(this.db).forEach((function(e){var a={firstExpire:Number.MAX_SAFE_INTEGER,lastDownload:0,created:Number.MAX_SAFE_INTEGER,password:!1,size:0};t.db[e].forEach((function(t){a.size+=t.size,t.metadata._password&&(a.password=!0),+t.metadata.createdAt<a.created&&(a.created=+t.metadata.createdAt),t.metadata.lastDownload&&+t.metadata.lastDownload>a.lastDownload&&(a.lastDownload=+t.metadata.lastDownload),"one-time"===t.metadata.retention?(a.firstExpire="one-time",t.expireDate=t.metadata.retention):(t.expireDate=+t.metadata.createdAt+1e3*+t.metadata.retention,a.firstExpire>t.expireDate&&(a.firstExpire=t.expireDate))})),t.sizeSum+=a.size,t.$set(t.sum,e,a)}))},humanFileSize:function(t){var e=-1;do{t/=1024,e++}while(t>1024);return Math.max(t,0).toFixed(2)+[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"][e]}}}),o=(a(171),a(1)),i=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"download-app"},[t.loggedIn?a("a",{staticClass:"btn btn-sm btn-info btn-new-session",attrs:{title:"Refresh"},on:{click:function(e){t.login()}}},[a("icon",{attrs:{name:"sync-alt"}})],1):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"alert alert-danger"},[a("strong",[a("icon",{staticClass:"fa-fw",attrs:{name:"exclamation-triangle"}}),t._v(" "+t._s(t.error))],1)]),t.loggedIn?t._e():a("form",{staticClass:"well",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.login(e)}}},[a("h3",[t._v("密码")]),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",autofocus:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.passwordWrong,expression:"passwordWrong"}],staticClass:"text-danger"},[a("strong",[t._v("Access denied!")])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!t.password}},[a("icon",{staticClass:"fa-fw",attrs:{name:"sign-in-alt"}}),t._v(" login")],1)]),t.loggedIn?a("div",[a("table",{staticClass:"table table-hover"},[t._m(0),t._l(t.db,(function(e,n){return[a("tbody",{class:{expanded:t.expand===n}},[a("tr",{staticClass:"bucket",on:{click:function(e){t.expandView(n)}}},[a("td",[t._v(t._s(n)),t.sum[n].password?a("icon",{staticClass:"pull-right",attrs:{name:"key",title:"Password protected"}}):t._e()],1),a("td",[t._v(t._s(t._f("date")(t.sum[n].created)))]),a("td",[t.sum[n].lastDownload?[t._v(t._s(t._f("date")(t.sum[n].lastDownload)))]:[t._v("-")]],2),a("td",["number"==typeof t.sum[n].firstExpire?[t._v(t._s(t._f("date")(t.sum[n].firstExpire)))]:[t._v(" "+t._s(t.sum[n].firstExpire))]],2),a("td",{staticClass:"text-right"},[t._v(t._s(t.humanFileSize(t.sum[n].size)))])])]),t.expand===n?a("tbody",{staticClass:"expanded"},[t._l(e,(function(e){return[a("tr",{staticClass:"file"},[a("td",[t._v(t._s(e.metadata.name))]),a("td",[t._v(t._s(t._f("date")(+e.metadata.createdAt)))]),a("td",[e.metadata.lastDownload?[t._v(t._s(t._f("date")(+e.metadata.lastDownload)))]:[t._v("-")]],2),a("td",["number"==typeof e.expireDate?[t._v(t._s(t._f("date")(e.expireDate)))]:[t._v(t._s(e.expireDate))]],2),a("td",{staticClass:"text-right"},[t._v(t._s(t.humanFileSize(e.size)))])])]}))],2):t._e()]})),a("tfoot",[a("tr",[a("td",{attrs:{colspan:"3"}}),a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("Sum: "+t._s(t.humanFileSize(t.sizeSum)))])])])],2)]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("SID")]),e("th",[this._v("Created")]),e("th",[this._v("Downloaded")]),e("th",[this._v("Expire")]),e("th",[this._v("Size")])])])}],!1,null,null,null);i.options.__file="Admin.vue";var d=i.exports,l=a(0);function u(t){return"[object Date]"===Object.prototype.toString.call(t)}r.a.filter("date",(function(t,e){var a;return u(t)||(t=(a=t)?new Date(a):a),u(t)?function(t){if(null===t)return"";var e=function(t){return t<10?"0"+t:t};return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())}(t):t})),r.a.component("icon",l.a),new r.a({el:"#admin",render:function(t){return t(d)}}),window.PSITRANSFER_VERSION="#041684408b"},46:function(t,e,a){var n=a(172);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(95).default)("91940af2",n,!0,{})}});